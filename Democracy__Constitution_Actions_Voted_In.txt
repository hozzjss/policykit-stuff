{"name":"Democracy: Constitution Actions Voted In","description":" The constitution would dictate that any rules governing procedures are to be proposed by a member of the community and voted on by at least one member, it's valid for a member to propose and vote to pass the same governing procedure","is_bundled":false,"filter":"\nif not action.initiator.groups.filter(name = \"Moderator\").exists():\n    return True\nelse:\n    return False\n                                                           ","initialize":"pass","check":"\nimport datetime\nimport math\ndef hasVoterRole(user):\n\treturn user.has_role('Democracy: Voter')\n# voter_users = list(filter(hasVoterRole, users))\nvoter_users = users\nyes_votes = action.proposal.get_yes_votes(users=voter_users)\ndebug(f'yes votes are {len(yes_votes)}')\nif len(yes_votes) >= 1:\n    return PASSED\nelif action.proposal.get_time_elapsed() > datetime.timedelta(days=1):\n    return FAILED\n                                                           ","notify":"\ndef format_vote_on(action):\n    user = action.initiator\n    userId: str = user.username\n    discord_id, _ = userId.split(\":\")\n    message_text = f\"\"\"\n<@{discord_id}> proposed {action}\nvote by reacting either üëç or üëé on this message\n\"\"\"\n    \n    try:\n        desc = action.description\n        message_text += f\"\"\"\nDescription: {desc}\"\"\"\n    except:\n        pass\n    return message_text\n\naction.community.notify_action(action, policy, users, template=format_vote_on(action), channel=846398942119329862)\n                                                           ","success":"action.execute()","fail":"pass"}