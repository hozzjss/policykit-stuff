{"name":"skin in the game","description":"A bot command that calculates a user's total skin in the game through cred","is_bundled":false,"filter":"try:\n    should_pass = action.action_codename == \"discordpostmessage\"\n    text_parts = action.text.split()\n    should_pass = should_pass and len(text_parts) > 0\n    should_pass = should_pass and text_parts[0] == '!sitg'\n    return should_pass\nexcept:\n  return False","initialize":"pass\n\n","check":"return PASSED\n\n","notify":"pass\n\n","success":"import math\n\naction.execute()\n\ntry:\n    username = action.initiator.readable_name\n    params = {\"username\": username}\n    result = metagov.perform_action(\"sourcecred.user-cred\", params)\n    user_cred = result[\"value\"]\n\n    result = metagov.perform_action(\"sourcecred.total-cred\", {})\n    total_cred = result[\"value\"]\n\n    percentage = math.floor((user_cred / total_cred) * 100)\n\n    message = f\"\"\"Your skin-in-in-the-game score is {percentage}%\nTotal cred = {math.floor(total_cred)}\nYour cred = {math.floor(user_cred)}\"\"\"\n\n    action.community.notify_action(action, policy, users, \n                  template=message, \n                  channel = \"846398942119329862\")\nexcept:\n  pass\n","fail":"pass\n\n"}